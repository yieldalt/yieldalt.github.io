!function(n){n.fn.extend({formatNumber:function(o){o=n.extend({cents:".",decimal:","},o);return this.each(function(){var t,a=o,e=n(this);for(values=n.trim(e.html()),values+="",x=values.split(a.cents),x1=x[0],x2=1<x.length?a.cents+x[1]:"",t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1"+a.decimal+"$2");e.html(x1+x2)})}})}(jQuery),$(document).ready(function(){var t=$("input#totalLoans").val(),a=$("input#avgLoanSize").val(),e=$("input#defaultPct").val(),o=$("input#avgInterest").val(),n=.01*o,r=$("input#avgYldPrice").val(),l=$("input#lenderIntFee").val(),g=350,u=$("p#totalGrossVol"),b=$("p#totalGoodVol"),i=$("p#totalDefVol"),s=$("p#avgLoanSize"),d=$("p#totalNumGood"),h=$("p#totalNumDef"),p=a*t,c=p*(1-.01*e),m=p*(.01*e),M=p/t,f=t*(1-.01*e),x=t-f,v=$("p#totalSupplyInc"),L=$("p#supplyDecLendingAvg"),y=a*n*(l/100),D=.01*a,S=1.25*a*.07,N=(y+D)*f,Y=S*x,I=N+Y,A=I/r,C=Math.min(1/r*(n-.01)*a,g/r),P=C*f;console.log("Total fees on good loans: $"+I),console.log("Total YLD to be burned: "+A+" YLD"),console.log("Total YLD to be minted (before burn): "+P+" YLD"),console.log("Supply Increase - Supply Decrease: "+(P-A)+" YLD");var k=f*C,F=a*n*.02/r;u.text(a*t).formatNumber(),b.text(c).formatNumber(),i.text(m).formatNumber(),s.text(M).formatNumber(),d.text(f),h.text(x),v.text(k),L.text(F),$("#totalToMint").text(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").text(Math.round(A)+" YLD").formatNumber(),$("#netMint").text(Math.round(P-A)+" YLD").formatNumber();var z,V,w=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sept","Oct","Nov","Dec"],T=new Date,B=w[T.getMonth()],G=(T.getMonth(),622650),R=P-A,E=[G,G+R,G+2*R,G+3*R,G+4*R,G+5*R,G+6*R,G+7*R,G+8*R,G+9*R,G+10*R,G+11*R],J=document.getElementById("supply").getContext("2d"),W=new Chart(J,{type:"bar",data:{labels:[B,w[T.getMonth()+1],w[T.getMonth()+2],w[T.getMonth()+3],w[T.getMonth()+4],w[T.getMonth()+5],w[T.getMonth()+6],w[T.getMonth()+7],w[T.getMonth()+8],w[T.getMonth()+9],w[T.getMonth()+10],w[T.getMonth()+11]],datasets:[{label:"YLD Supply",data:E,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((G+11*R)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}});function Z(t){(t.target.previousElementSibling||t.target.nextElementSibling).value=t.target.value}$(".inputRange").change(Z),$("#totalLoans").change(Z),$("#avgLoanSize").change(Z),$("#avgYldPrice").change(Z),$("#avgInterest").change(Z),$("#defaultPct").change(Z),$("#lenderIntFee").change(Z),$("#maxYldReward").change(Z),$(".inputRange, #totalLoans, #avgLoanSize, #avgYldPrice, #avgInterest, #defaultPct, #lenderIntFee").change(function(){t=$("input#totalLoans").val(),a=$("input#avgLoanSize").val(),e=$("input#defaultPct").val(),o=$("input#avgInterest").val(),n=.01*o,r=$("input#avgYldPrice").val(),l=$("input#lenderIntFee").val(),g=350,u=$("p#totalGrossVol"),b=$("p#totalGoodVol"),i=$("p#totalDefVol"),s=$("p#avgLoanSize"),d=$("p#totalNumGood"),h=$("p#totalNumDef"),c=(p=a*t)*(1-.01*e),m=p*(.01*e),M=p/t,x=t-(f=t*(1-.01*e)),v=$("p#totalSupplyInc"),L=$("p#supplyDecLendingAvg"),A=(I=(N=((y=a*n*(l/100))+(D=.01*a))*f)+(Y=(S=1.25*a*.07)*x))/r,C=Math.min(1/r*(n-.01)*a,g/r),P=C*f,u.text(Math.round(a*t)).formatNumber(),b.text(Math.round(c)).formatNumber(),i.text(Math.round(m)).formatNumber(),s.text(Math.round(M)).formatNumber(),d.text(parseInt(f)),h.text(parseInt(x)),v.text(k),L.text(F),$("#totalToMint").text(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").text(Math.round(A)+" YLD").formatNumber(),$("#netMint").text(Math.round(P-A)+" YLD").formatNumber(),E=z=[G=622650,G+(R=P-A),G+2*R,G+3*R,G+4*R,G+5*R,G+6*R,G+7*R,G+8*R,G+9*R,G+10*R,G+11*R],W.data.datasets[0].data=z,W.config.options.scales.yAxes[0].ticks.min=Math.min(500*Math.round((G+11*R)/1e3),5e5),W.update()}),Chart.defaults.global.defaultFontFamily="IBM Plex Mono",$("a.switch-chart").click(function(t){t.preventDefault();var a=$(this);V=a.hasClass("bar")?"line":"bar",a.toggleClass("bar line"),W.destroy(),W=new Chart(J,{type:V,data:{labels:[B,w[T.getMonth()+1],w[T.getMonth()+2],w[T.getMonth()+3],w[T.getMonth()+4],w[T.getMonth()+5],w[T.getMonth()+6],w[T.getMonth()+7],w[T.getMonth()+8],w[T.getMonth()+9],w[T.getMonth()+10],w[T.getMonth()+11]],datasets:[{label:"YLD Supply",data:E,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((G+11*R)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}})})});