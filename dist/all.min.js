!function(h){"use strict";var e={pips:function(e){var p,t,a,l,n,d=this,i="",g=d._valueMin(),f=(d._valueMax()-g)/d.options.step,s=d.element.find(".ui-slider-handle"),b={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:100<f?Math.floor(.05*f):1,formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===h.type(e)||"undefined"===h.type(e)){h.extend(b,e),d.element.data("pips-options",b),d.options.pipStep=Math.abs(Math.round(b.step))||1,d.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var r={single:function(l){this.resetClasses(),n.filter(".ui-slider-pip-"+this.classLabel(l)).addClass("ui-slider-pip-selected"),d.options.range&&n.each(function(e,t){var a=h(t).children(".ui-slider-label").data("value");("min"===d.options.range&&a<l||"max"===d.options.range&&l<a)&&h(t).addClass("ui-slider-pip-inrange")})},range:function(l){for(this.resetClasses(),p=0;p<l.length;p++)n.filter(".ui-slider-pip-"+this.classLabel(l[p])).addClass("ui-slider-pip-selected-"+(p+1));d.options.range&&n.each(function(e,t){var a=h(t).children(".ui-slider-label").data("value");a>l[0]&&a<l[1]&&h(t).addClass("ui-slider-pip-inrange")})},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var a=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;n.removeClass(function(e,t){return(t.match(a)||[]).join(" ")})}};for(i+=u("first"),a=d.options.pipStep;a<f;a+=d.options.pipStep)i+=u(a);for(i+=u("last"),d.element.append(i),n=d.element.find(".ui-slider-pip"),l=h._data(d.element.get(0),"events").mousedown&&h._data(d.element.get(0),"events").mousedown.length?h._data(d.element.get(0),"events").mousedown:d.element.data("mousedown-handlers"),d.element.data("mousedown-handlers",l.slice()),t=0;t<l.length;t++)"slider"===l[t].namespace&&d.element.data("mousedown-original",l[t].handler);d.element.off("mousedown.slider").on("mousedown.selectPip",function(e){var t=h(e.target),a=o(t.data("value")),l=s.eq(a);(l.addClass("ui-state-active"),t.is(".ui-slider-label"))?(function(e,t){if(!d.option("disabled")){var a=h(e).data("value"),l=o(a);d.values()&&d.values().length?d.options.values[l]=d._trimAlignValue(a):d.options.value=d._trimAlignValue(a),d._refreshValue(),d._change(t,l)}}(t,e),d.element.one("mouseup.selectPip",function(){l.removeClass("ui-state-active").focus()})):d.element.data("mousedown-original")(e)}),d.element.on("slide.selectPip slidechange.selectPip",function(e,t){var a=h(this),l=a.slider("value"),n=a.slider("values");t&&(l=t.value,n=t.values),d.values()&&d.values().length?r.range(n):r.single(l)})}else"destroy"===e?d.element.off(".selectPip").on("mousedown.slider",d.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove():"refresh"===e&&d.element.slider("pips",d.element.data("pips-options"));function o(t){var e,a,l,n,i,s=[],r=0;if(d.values()&&d.values().length){for(l=d.values(),n=h.map(l,function(e){return Math.abs(e-t)}),i=Math.min.apply(Math,n),e=0;e<n.length;e++)n[e]===i&&s.push(e);for(r=s[0],a=0;a<s.length;a++)d._lastChangedValue===s[a]&&(r=s[a]);d.options.range&&2===s.length&&(t>l[1]?r=s[1]:t<l[0]&&(r=s[0]))}return r}function u(e){var t,a,l,n,i,s=e,r="ui-slider-pip",o=d.value(),u=d.values();if("first"===e?s=0:"last"===e&&(s=f),n=(l=g+d.options.step*s).toString().replace(".","-"),i=s+g-g,t="array"===h.type(b.labels)?b.labels[i]||"":"object"===h.type(b.labels)?"first"===e?b.labels.first||"":"last"===e?b.labels.last||"":"array"===h.type(b.labels.rest)?b.labels.rest[i-1]||"":l:l,"first"===e?(a="0%",r+=" ui-slider-pip-first",r+="label"===b.first?" ui-slider-pip-label":"",r+=!1===b.first?" ui-slider-pip-hide":""):"last"===e?(a="100%",r+=" ui-slider-pip-last",r+="label"===b.last?" ui-slider-pip-label":"",r+=!1===b.last?" ui-slider-pip-hide":""):(a=(100/f*e).toFixed(4)+"%",r+="label"===b.rest?" ui-slider-pip-label":"",r+=!1===b.rest?" ui-slider-pip-hide":""),r+=" ui-slider-pip-"+n,u&&u.length){for(p=0;p<u.length;p++)l===u[p]&&(r+=" ui-slider-pip-initial-"+(p+1),r+=" ui-slider-pip-selected-"+(p+1));d.options.range&&l>u[0]&&l<u[1]&&(r+=" ui-slider-pip-inrange")}else l===o&&(r+=" ui-slider-pip-initial",r+=" ui-slider-pip-selected"),d.options.range&&("min"===d.options.range&&l<o||"max"===d.options.range&&o<l)&&(r+=" ui-slider-pip-inrange");return'<span class="'+r+'" style="'+("horizontal"===d.options.orientation?"left: "+a:"bottom: "+a)+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+l+'">'+b.formatLabel(t)+"</span></span>"}},float:function(e){var l,n=this,i=n._valueMin(),s=n._valueMax(),t=n._value(),a=n._values(),r=[],o=n.element.find(".ui-slider-handle"),u={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===h.type(e)||"undefined"===h.type(e)){if(h.extend(u,e),n.element.data("float-options",u),t<i&&(t=i),s<t&&(t=s),a&&a.length)for(l=0;l<a.length;l++)a[l]<i&&(a[l]=i),a[l]>s&&(a[l]=s);if(n.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),u.handle)for(r=n.values()&&n.values().length?p(a):p([t]),l=0;l<r.length;l++)o.eq(l).append(h('<span class="ui-slider-tip">'+u.formatLabel(r[l])+"</span>"));u.pips&&n.element.find(".ui-slider-label").each(function(e,t){var a,l=h(t),n=[l.data("value")];a=u.formatLabel(p(n)[0]),h('<span class="ui-slider-tip-label">'+a+"</span>").insertAfter(l)}),"slide"!==u.event&&"slidechange"!==u.event&&"slide slidechange"!==u.event&&"slidechange slide"!==u.event&&(u.event="slidechange slide"),n.element.off(".sliderFloat").on(u.event+".sliderFloat",function(e,t){var a="array"===h.type(t.value)?t.value:[t.value],l=u.formatLabel(p(a)[0]);h(t.handle).find(".ui-slider-tip").html(l)})}else"destroy"===e?n.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove():"refresh"===e&&n.element.slider("float",n.element.data("float-options"));function p(e){var t=[],a=h.map(e,function(e){return Math.ceil((e-i)/n.options.step)});if("array"===h.type(u.labels))for(l=0;l<e.length;l++)t[l]=u.labels[a[l]]||e[l];else if("object"===h.type(u.labels))for(l=0;l<e.length;l++)e[l]===i?t[l]=u.labels.first||i:e[l]===s?t[l]=u.labels.last||s:"array"===h.type(u.labels.rest)?t[l]=u.labels.rest[a[l]-1]||e[l]:t[l]=e[l];else for(l=0;l<e.length;l++)t[l]=e[l];return t}}};h.extend(!0,h.ui.slider.prototype,e)}(jQuery),function(n){n.fn.extend({formatNumber:function(l){l=n.extend({cents:".",decimal:","},l);return this.each(function(){var e,t=l,a=n(this);for(values=n.trim(a.html()),values+="",x=values.split(t.cents),x1=x[0],x2=1<x.length?t.cents+x[1]:"",e=/(\d+)(\d{3})/;e.test(x1);)x1=x1.replace(e,"$1"+t.decimal+"$2");a.html(x1+x2)})}})}(jQuery),$(document).ready(function(){var e=$("input#totalLoans").val(),t=$("input#avgLoanSize").val(),a=$("input#defaultPct").val(),l=$("input#avgInterest").val(),n=.01*l,i=$("input#avgYldPrice").val(),s=$("input#lenderIntFee").val(),r=350,o=$("p#totalGrossVol"),u=$("p#totalGoodVol"),p=$("p#totalDefVol"),d=$("p#avgLoanSize"),g=$("p#totalNumGood"),f=$("p#totalNumDef"),b=t*e,h=b*(1-.01*a),c=b*(.01*a),m=b/e,v=e*(1-.01*a),M=e-v,x=$("p#totalSupplyInc"),y=$("p#supplyDecLendingAvg"),L=t*n*(s/100),C=.01*t,S=1.25*t*.07,D=(L+C)*v,N=S*M,w=D+N,Y=w/i,I=Math.min(1/i*(n-.01)*t,r/i),P=I*v;console.log("Total fees on good loans: $"+w),console.log("Total YLD to be burned: "+Y+" YLD"),console.log("Total YLD to be minted (before burn): "+P+" YLD"),console.log("Supply Increase - Supply Decrease: "+(P-Y)+" YLD");var A=v*I,_=t*n*.02/i;o.text(t*e).formatNumber(),u.text(h).formatNumber(),p.text(c).formatNumber(),d.text(m).formatNumber(),g.text(v),f.text(M),x.text(A),y.text(_),$("#totalToMint").text(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").text(Math.round(Y)+" YLD").formatNumber(),$("#netMint").text(Math.round(P-Y)+" YLD").formatNumber();var F,V,k=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sept","Oct","Nov","Dec"],z=new Date,j=k[z.getMonth()],T=(z.getMonth(),622650),B=P-Y,G=[T,T+B,T+2*B,T+3*B,T+4*B,T+5*B,T+6*B,T+7*B,T+8*B,T+9*B,T+10*B,T+11*B],R=document.getElementById("supply").getContext("2d"),E=new Chart(R,{type:"bar",data:{labels:[j,k[z.getMonth()+1],k[z.getMonth()+2],k[z.getMonth()+3],k[z.getMonth()+4],k[z.getMonth()+5],k[z.getMonth()+6],k[z.getMonth()+7],k[z.getMonth()+8],k[z.getMonth()+9],k[z.getMonth()+10],k[z.getMonth()+11]],datasets:[{label:"YLD Supply",data:G,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((T+11*B)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}});function J(e){(e.target.previousElementSibling||e.target.nextElementSibling).value=e.target.value}$(".inputRange").change(J),$("#totalLoans").change(J),$("#avgLoanSize").change(J),$("#avgYldPrice").change(J),$("#avgInterest").change(J),$("#defaultPct").change(J),$("#lenderIntFee").change(J),$("#maxYldReward").change(J),$(".inputRange, #totalLoans, #avgLoanSize, #avgYldPrice, #avgInterest, #defaultPct, #lenderIntFee").change(function(){e=$("input#totalLoans").val(),t=$("input#avgLoanSize").val(),a=$("input#defaultPct").val(),l=$("input#avgInterest").val(),n=.01*l,i=$("input#avgYldPrice").val(),s=$("input#lenderIntFee").val(),r=350,o=$("p#totalGrossVol"),u=$("p#totalGoodVol"),p=$("p#totalDefVol"),d=$("p#avgLoanSize"),g=$("p#totalNumGood"),f=$("p#totalNumDef"),h=(b=t*e)*(1-.01*a),c=b*(.01*a),m=b/e,M=e-(v=e*(1-.01*a)),x=$("p#totalSupplyInc"),y=$("p#supplyDecLendingAvg"),Y=(w=(D=((L=t*n*(s/100))+(C=.01*t))*v)+(N=(S=1.25*t*.07)*M))/i,I=Math.min(1/i*(n-.01)*t,r/i),P=I*v,o.text(Math.round(t*e)).formatNumber(),u.text(Math.round(h)).formatNumber(),p.text(Math.round(c)).formatNumber(),d.text(Math.round(m)).formatNumber(),g.text(parseInt(v)),f.text(parseInt(M)),x.text(A),y.text(_),$("#totalToMint").text(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").text(Math.round(Y)+" YLD").formatNumber(),$("#netMint").text(Math.round(P-Y)+" YLD").formatNumber(),G=F=[T=622650,T+(B=P-Y),T+2*B,T+3*B,T+4*B,T+5*B,T+6*B,T+7*B,T+8*B,T+9*B,T+10*B,T+11*B],E.data.datasets[0].data=F,E.config.options.scales.yAxes[0].ticks.min=Math.min(500*Math.round((T+11*B)/1e3),5e5),E.update()}),Chart.defaults.global.defaultFontFamily="IBM Plex Mono",$("a.switch-chart").click(function(e){e.preventDefault();var t=$(this);V=t.hasClass("bar")?"line":"bar",t.toggleClass("bar line"),E.destroy(),E=new Chart(R,{type:V,data:{labels:[j,k[z.getMonth()+1],k[z.getMonth()+2],k[z.getMonth()+3],k[z.getMonth()+4],k[z.getMonth()+5],k[z.getMonth()+6],k[z.getMonth()+7],k[z.getMonth()+8],k[z.getMonth()+9],k[z.getMonth()+10],k[z.getMonth()+11]],datasets:[{label:"YLD Supply",data:G,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((T+11*B)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}})})});