!function(o){o.fn.extend({formatNumber:function(n){n=o.extend({cents:".",decimal:","},n);return this.each(function(){var t,a=n,e=o(this);for(values=o.trim(e.html()),values+="",x=values.split(a.cents),x1=x[0],x2=1<x.length?a.cents+x[1]:"",t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1"+a.decimal+"$2");e.html(x1+x2)})}})}(jQuery),$(document).ready(function(){var t=$("input#totalLoans").val(),a=$("input#avgLoanSize").val(),e=$("input#defaultPct").val(),n=$("input#avgInterest").val(),o=.01*n,r=$("input#avgYldPrice").val(),l=$("input#lenderIntFee").val(),g=350,i=$("input#claimedEarlyRwd").val(),u=$("input#unclaimedRwd").val(),b=$("p#totalGrossVol"),d=$("p#totalGoodVol"),s=$("p#totalDefVol"),c=$("p#avgLoanSize"),p=$("p#totalNumGood"),h=$("p#totalNumDef"),m=a*t,M=m*(1-.01*e),f=m*(.01*e),x=m/t,v=t*(1-.01*e),y=t-v,L=$("p#totalSupplyInc"),D=$("p#supplyDecLendingAvg"),S=a*o*(l/100),N=.01*a,Y=1.25*a*.07,I=(S+N)*v,w=Y*y,C=I+w,A=C/r,R=Math.min(1/r*(o-.01)*a,g/r)*(1-u/100),k=R-R*(i/100)*.65,P=k*v;console.log("Total fees on good loans: $"+C),console.log("Total YLD to be burned: "+A+" YLD"),console.log("Total YLD to be minted (before burn): "+P+" YLD"),console.log("Supply Increase - Supply Decrease: "+(P-A)+" YLD");var F=v*k,z=a*o*.02/r;b.text(a*t).formatNumber(),d.text(M).formatNumber(),s.text(f).formatNumber(),c.text(x).formatNumber(),p.text(v),h.text(y),L.text(F),D.text(z),$("#totalToMint").text(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").text(Math.round(A)+" YLD").formatNumber(),$("#netMint").text(Math.round(P-A)+" YLD").formatNumber();var V,E,T=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sept","Oct","Nov","Dec"],B=new Date,G=T[B.getMonth()],J=(B.getMonth(),622650),W=P-A,Z=[J,J+W,J+2*W,J+3*W,J+4*W,J+5*W,J+6*W,J+7*W,J+8*W,J+9*W,J+10*W,J+11*W],j=document.getElementById("supply").getContext("2d"),O=new Chart(j,{type:"bar",data:{labels:[G,T[B.getMonth()+1],T[B.getMonth()+2],T[B.getMonth()+3],T[B.getMonth()+4],T[B.getMonth()+5],T[B.getMonth()+6],T[B.getMonth()+7],T[B.getMonth()+8],T[B.getMonth()+9],T[B.getMonth()+10],T[B.getMonth()+11]],datasets:[{label:"YLD Supply",data:Z,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((J+11*W)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{display:!0,onClick:!1,labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}});function Q(t){(t.target.previousElementSibling||t.target.nextElementSibling).value=t.target.value}$(".inputRange").change(Q),$("#totalLoans").change(Q),$("#avgLoanSize").change(Q),$("#avgYldPrice").change(Q),$("#avgInterest").change(Q),$("#defaultPct").change(Q),$("#lenderIntFee").change(Q),$("#maxYldReward").change(Q),$("#claimedEarlyRwd").change(Q),$("#unclaimedRwd").change(Q),$(".inputRange, #totalLoans, #avgLoanSize, #avgYldPrice, #avgInterest, #defaultPct, #lenderIntFee, #claimedEarlyRwd, #unclaimedRwd").change(function(){t=$("input#totalLoans").val(),a=$("input#avgLoanSize").val(),e=$("input#defaultPct").val(),n=$("input#avgInterest").val(),o=.01*n,r=$("input#avgYldPrice").val(),l=$("input#lenderIntFee").val(),g=350,i=$("input#claimedEarlyRwd").val(),u=$("input#unclaimedRwd").val(),b=$("p#totalGrossVol"),d=$("p#totalGoodVol"),s=$("p#totalDefVol"),c=$("p#avgLoanSize"),p=$("p#totalNumGood"),h=$("p#totalNumDef"),M=(m=a*t)*(1-.01*e),f=m*(.01*e),x=m/t,y=t-(v=t*(1-.01*e)),L=$("p#totalSupplyInc"),D=$("p#supplyDecLendingAvg"),A=(C=(I=((S=a*o*(l/100))+(N=.01*a))*v)+(w=(Y=1.25*a*.07)*y))/r,R=Math.min(1/r*(o-.01)*a,g/r)*(1-u/100),P=(k=R-R*(i/100)*.65)*v,b.text(Math.round(a*t)).formatNumber(),d.text(Math.round(M)).formatNumber(),s.text(Math.round(f)).formatNumber(),c.text(Math.round(x)).formatNumber(),p.text(parseInt(v)),h.text(parseInt(y)),L.text(F),D.text(z),$("#totalToMint").text(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").text(Math.round(A)+" YLD").formatNumber(),$("#netMint").text(Math.round(P-A)+" YLD").formatNumber(),Z=V=[J=622650,J+(W=P-A),J+2*W,J+3*W,J+4*W,J+5*W,J+6*W,J+7*W,J+8*W,J+9*W,J+10*W,J+11*W],O.data.datasets[0].data=V,O.config.options.scales.yAxes[0].ticks.min=Math.min(500*Math.round((J+11*W)/1e3),5e5),O.update()}),Chart.defaults.global.defaultFontFamily="IBM Plex Mono",$("a.switch-chart").click(function(t){t.preventDefault();var a=$(this);E=a.hasClass("bar")?"line":"bar",a.toggleClass("bar line"),O.destroy(),O=new Chart(j,{type:E,data:{labels:[G,T[B.getMonth()+1],T[B.getMonth()+2],T[B.getMonth()+3],T[B.getMonth()+4],T[B.getMonth()+5],T[B.getMonth()+6],T[B.getMonth()+7],T[B.getMonth()+8],T[B.getMonth()+9],T[B.getMonth()+10],T[B.getMonth()+11]],datasets:[{label:"YLD Supply",data:Z,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((J+11*W)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{display:!0,onClick:!1,labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}})})});