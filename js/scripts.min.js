$(document).ready(function(){var t=$("input#totalLoans").val(),a=$("input#avgLoanSize").val(),e=$("input#defaultPct").val(),o=$("input#avgInterest").val(),n=.01*o,r=$("input#avgYldPrice").val(),l=$("input#lenderIntFee").val(),g=350,b=$("p#totalGrossVol"),u=$("p#totalGoodVol"),h=$("p#totalDefVol"),i=$("p#avgLoanSize"),s=$("p#totalNumGood"),m=$("p#totalNumDef"),p=a*t,d=p*(1-.01*e),M=p*(.01*e),c=p/t,f=t*(1-.01*e),v=t-f,L=$("p#totalSupplyInc"),y=$("p#supplyDecLendingAvg"),D=a*n*(l/100),S=.01*a,N=.07*a,I=(D+S)*f,Y=N*v,A=I+Y,C=A/r,x=Math.min((n-.01)*a,g/r),P=x*f;console.log("Total fees on good loans: $"+A),console.log("Total YLD to be burned: "+C+" YLD"),console.log("Total YLD to be minted (before burn): "+P+" YLD"),console.log("Supply Increase - Supply Decrease: "+(P-C)+" YLD");var k=f*x,F=a*n*.02/r;b.html(a*t).formatNumber(),u.html(d).formatNumber(),h.html(M).formatNumber(),i.html(c).formatNumber(),s.html(f),m.html(v),L.html(k),y.html(F),$("#totalToMint").html(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").html(Math.round(C)+" YLD").formatNumber(),$("#netMint").html(Math.round(P-C)+" YLD").formatNumber();var z,V,T=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sept","Oct","Nov","Dec"],w=new Date,B=T[w.getMonth()],G=(T[w.getMonth()+1],625e3),R=P-C,E=[G,G+R,G+2*R,G+3*R,G+4*R,G+5*R,G+6*R,G+7*R,G+8*R,G+9*R,G+10*R,G+11*R],J=document.getElementById("supply").getContext("2d"),W=new Chart(J,{type:"bar",data:{labels:[B,T[w.getMonth()+1],T[w.getMonth()+2],T[w.getMonth()+3],T[w.getMonth()+4],T[w.getMonth()+5],T[w.getMonth()+6],T[w.getMonth()+7],T[w.getMonth()+8],T[w.getMonth()+9],T[w.getMonth()+10],T[w.getMonth()+11]],datasets:[{label:"YLD Supply",data:E,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((G+11*R)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}});function Z(t){(t.target.previousElementSibling||t.target.nextElementSibling).value=t.target.value}$(".inputRange").change(Z),$("#totalLoans").change(Z),$("#avgLoanSize").change(Z),$("#avgYldPrice").change(Z),$("#avgInterest").change(Z),$("#defaultPct").change(Z),$("#lenderIntFee").change(Z),$(".inputRange, #totalLoans, #avgLoanSize, #avgYldPrice, #avgInterest, #defaultPct, #lenderIntFee").change(function(){t=$("input#totalLoans").val(),a=$("input#avgLoanSize").val(),e=$("input#defaultPct").val(),o=$("input#avgInterest").val(),n=.01*o,r=$("input#avgYldPrice").val(),l=$("input#lenderIntFee").val(),g=350,b=$("p#totalGrossVol"),u=$("p#totalGoodVol"),h=$("p#totalDefVol"),i=$("p#avgLoanSize"),s=$("p#totalNumGood"),m=$("p#totalNumDef"),d=(p=a*t)*(1-.01*e),M=p*(.01*e),c=p/t,v=t-(f=t*(1-.01*e)),L=$("p#totalSupplyInc"),y=$("p#supplyDecLendingAvg"),C=(A=(I=((D=a*n*(l/100))+(S=.01*a))*f)+(Y=(N=.07*a)*v))/r,x=Math.min((n-.01)*a,g/r),P=x*f,b.html(Math.round(a*t)).formatNumber(),u.html(Math.round(d)).formatNumber(),h.html(Math.round(M)).formatNumber(),i.html(Math.round(c)).formatNumber(),s.html(parseInt(f)),m.html(parseInt(v)),L.html(k),y.html(F),$("#totalToMint").html(Math.round(P)+" YLD").formatNumber(),$("#totalToBurn").html(Math.round(C)+" YLD").formatNumber(),$("#netMint").html(Math.round(P-C)+" YLD").formatNumber(),E=z=[G=625e3,G+(R=P-C),G+2*R,G+3*R,G+4*R,G+5*R,G+6*R,G+7*R,G+8*R,G+9*R,G+10*R,G+11*R],W.data.datasets[0].data=z,W.config.options.scales.yAxes[0].ticks.min=Math.min(500*Math.round((G+11*R)/1e3),5e5),W.update()}),Chart.defaults.global.defaultFontFamily="IBM Plex Mono",$("a.switch-chart").click(function(t){t.preventDefault();var a=$(this);a.hasClass("bar")?(V="line",a.toggleClass("bar line")):(V="bar",a.toggleClass("bar line")),W.destroy(),W=new Chart(J,{type:V,data:{labels:[B,T[w.getMonth()+1],T[w.getMonth()+2],T[w.getMonth()+3],T[w.getMonth()+4],T[w.getMonth()+5],T[w.getMonth()+6],T[w.getMonth()+7],T[w.getMonth()+8],T[w.getMonth()+9],T[w.getMonth()+10],T[w.getMonth()+11]],datasets:[{label:"YLD Supply",data:E,backgroundColor:["rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)","rgba(239, 188, 134, 0.2)"],borderColor:["rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)","rgba(239, 188, 134, 1)"],borderWidth:1}]},options:{scaleShowValues:!0,scales:{yAxes:[{ticks:{beginAtZero:!1,min:Math.min(500*Math.round((G+11*R)/1e3),5e5)}}],xAxes:[{ticks:{autoSkip:!1}}]},maintainAspectRatio:!1,display:!1,legend:{labels:{fontColor:"#fff",fontSize:16,fontFamily:"IBM Plex Mono"}}}})})});